<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Phase inversion takes a signal 

 
  
   
  
  
   
    ">
<meta property="og:title" content="Dumb Tricks With Phase Inversion">
<meta property="og:description" content="Phase inversion takes a signal 

 
  
   
  
  
   
    
   
  
 
 
  
   
  
 



 and flips it upside down 

 
  
   
  
  
   
    
   
  
 
 
  
   
  
 



. Most people are introduced to it as a button you push in a DAW while troubleshooting phase problems, but with some thinking it&rsquo;s capable of a lot more than that. Some digging in the audio DSP literature will uncover a stray sentence or two that acknowledges this, but I get the impression that it strikes the people who already know it as too obvious to be worth mentioning. The really nice thing about it is that it all works in a DAW&ndash;you don&rsquo;t need to break out Max/MSP or Reaktor to experiment with it.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://graemephi.github.io/posts/dumb-tricks-with-phase-inversion/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2019-06-02T12:34:03+01:00">
<meta property="article:modified_time" content="2019-06-02T12:34:03+01:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Dumb Tricks With Phase Inversion">
<meta name=twitter:description content="Phase inversion takes a signal 

 
  
   
  
  
   
    
   
  
 
 
  
   
  
 



 and flips it upside down 

 
  
   
  
  
   
    
   
  
 
 
  
   
  
 



. Most people are introduced to it as a button you push in a DAW while troubleshooting phase problems, but with some thinking it&rsquo;s capable of a lot more than that. Some digging in the audio DSP literature will uncover a stray sentence or two that acknowledges this, but I get the impression that it strikes the people who already know it as too obvious to be worth mentioning. The really nice thing about it is that it all works in a DAW&ndash;you don&rsquo;t need to break out Max/MSP or Reaktor to experiment with it.">
<meta name=twitter:site content="@graemephi">
<meta name=generator content="Hugo 0.90.0-DEV">
<title>Dumb Tricks With Phase Inversion - graeme phillips posting</title>
<link href=/css/style.css rel=stylesheet type=text/css>
</head>
<body>
<div class=content>
<header class=page-header>
<span style=display:inline-flex;flex-direction:column>
<h1 class=page-title><a href=/>φ</a></h1>
<span>graeme phillips posting</span>
</span>
<span class=links>
<a href=https://github.com/graemephi class="github icon" title=Github><svg height="30" style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" width="30" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg>
</a>
<a href=https://twitter.com/graemephi class="twitter icon" title=Twitter><svg height="30" style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" width="30" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</a>
</span>
</header>
<div class=post-header>
<h1 class=post-title><a href=/posts/dumb-tricks-with-phase-inversion/>Dumb Tricks With Phase Inversion</a></h1>
</div>
<div class=text-align-right>
<span class=date>June 2, 2019</span>
<br>
<ul class="tags post-tags">
[
<li><a href=/tags/audio/>audio</a></li>
]
</ul>
</div>
<div class=post>
<p>Phase inversion takes a signal
<span class=svgi><svg height="18pt" viewBox="0 0 54 18" width="54pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="figure_1"><g id="patch_1"><path d="M0 18H54V0H0z" style="fill:none"/></g><g id="axes_1"><g id="line2d_1"><path clip-path="url(#peaaa2fd3e3)" d="M2.454545 9 5.160344 7.124681l1.159627-.579612 1.159628-.338024L8.639227 6.150278 9.798855 6.380754l1.159627.482298 2.319256 1.347039 1.159628.581419 1.159628.307948L16.370079 9.088321 17.143164 8.878447 17.916249 8.469792l1.159628-.928018 2.705798-2.487759L22.55476 4.662304 23.327845 4.567274 24.100931 4.814686 24.874016 5.407444 25.647101 6.29775l2.705798 3.658757L29.125984 10.46926 29.512527 10.540695 29.899069 10.474129 30.285612 10.265005 31.058697 9.431231 31.831782 8.128533l2.319256-4.464112L34.537581 3.224864 34.924123 2.964516 35.310666 2.906228 35.697208 3.06378 36.083751 3.440397 36.856836 4.805238l1.159628 3.096733 1.159628 3.087598L39.562634 11.72477 39.949177 12.217402 40.335719 12.424677 40.722262 12.31873 41.108805 11.88961 41.495347 11.14738 42.268432 8.868333l1.932713-6.830189L44.587688 1.234146 44.97423.818182 45.360773.840679 45.747316 1.32304 46.133858 2.253693 46.906943 5.240711l1.546171 7.31969L48.839656 13.831438 49.226199 14.606821 49.612742 14.796036 49.999284 14.352468 50.385827 13.28096 51.158912 9.548236 51.545455 7.163497" style="fill:none;stroke:#cc0d1a;stroke-linecap:square;stroke-width:1.5"/></g></g></g><defs><clipPath id="peaaa2fd3e3"><rect height="18" width="54" x="0" y="0"/></clipPath></defs></svg>
</span>
and flips it upside down
<span class=svgi><svg height="18pt" viewBox="0 0 54 18" width="54pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="figure_1"><g id="patch_1"><path d="M0 18H54V0H0z" style="fill:none"/></g><g id="axes_1"><g id="line2d_1"><path clip-path="url(#p6eb91deae1)" d="M2.454545 9l2.705799 1.875319L6.319971 11.454931 7.479599 11.792955 8.639227 11.849722 9.798855 11.619246l1.159627-.482298 2.319256-1.347039 1.159628-.581419 1.159628-.307948L16.370079 8.911679 17.143164 9.121553 17.916249 9.530208l1.159628.928018 2.705798 2.487759L22.55476 13.337696 23.327845 13.432726 24.100931 13.185314 24.874016 12.592556 25.647101 11.70225l2.705798-3.658757L29.125984 7.53074 29.512527 7.459305 29.899069 7.525871 30.285612 7.734995 31.058697 8.568769 31.831782 9.871467l2.319256 4.464112L34.537581 14.775136 34.924123 15.035484 35.310666 15.093772 35.697208 14.93622 36.083751 14.559603 36.856836 13.194762l1.159628-3.096733 1.159628-3.087598L39.562634 6.27523 39.949177 5.782598 40.335719 5.575323 40.722262 5.68127 41.108805 6.11039 41.495347 6.85262 42.268432 9.131667l1.932713 6.830189L44.587688 16.765854 44.97423 17.181818 45.360773 17.159321 45.747316 16.67696 46.133858 15.746307 46.906943 12.759289l1.546171-7.31969L48.839656 4.168562 49.226199 3.393179 49.612742 3.203964 49.999284 3.647532 50.385827 4.71904 51.158912 8.451764 51.545455 10.836503" style="fill:none;stroke:#33f2e6;stroke-linecap:square;stroke-width:1.5"/></g></g></g><defs><clipPath id="p6eb91deae1"><rect height="18" width="54" x="0" y="0"/></clipPath></defs></svg>
</span>
. Most people are introduced to it as a button you push in a DAW while troubleshooting phase problems, but with some thinking it&rsquo;s capable of a lot more than that. Some digging in the audio DSP literature will uncover a stray sentence or two that acknowledges this, but I get the impression that it strikes the people who already know it as too obvious to be worth mentioning. The really nice thing about it is that it all works in a DAW&ndash;you don&rsquo;t need to break out Max/MSP or Reaktor to experiment with it.</p>
<p>I&rsquo;m pretty sure I originally got the basic idea for all this from <a href=https://vladgsound.wordpress.com/>vladg/sound</a>.</p>
<blockquote class=aside>My intuition for this is fairly algebraic so I&rsquo;ll be leaning on that a little, but all you need to have is an intuition for what is happening when you route audio around in a DAW. That said, I will be using notation from digital signal processing that&rsquo;s too useful to give up: <code>x[n]</code> reads as the <code>n</code>th sample of a signal <code>x</code>. Then <code>c[n] = a[n] + b[n]</code> describes <code>c</code> by telling you how to compute the <code>n</code>th sample of <code>c</code> in terms of signals <code>a</code> and <code>b</code>. We could drop the <code>[n]</code>, but this makes clear that we don&rsquo;t need to know anything about <code>a</code> or <code>b</code> other than their <code>n</code>th samples to compute the <code>n</code>th sample of <code>c</code>. For anything more complicated than this, I&rsquo;ll use graphics.</blockquote>
<h3 id=diffing>Diffing</h3>
<p>Phase inversion negates a signal, <code>y[n] = -x[n]</code>, so it turns addition (mixing) into subtraction.</p>
<blockquote>
<p>
<span class=svgi><svg height="36pt" viewBox="0 0 72 36" width="72pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="figure_1"><g id="patch_1"><path d="M0 36H72V0H0z" style="fill:none"/></g><g id="axes_1"><g id="line2d_1"><path clip-path="url(#p12c0a407d9)" d="M3.272727 18 4.818898 17.845997l1.03078-.104129L6.880458 17.855032l1.54617.570235L9.457409 18.709453 9.972799 18.702718 10.488189 18.567014 11.518969 17.952004l1.546171-1.059359L13.58053 16.762056 14.09592 16.825713 14.61131 17.094047l1.03078 1.018458 1.03078 1.150318L17.188261 19.646872 17.703651 19.793136 18.219041 19.657607l.51539-.417182 1.03078-1.446471 1.03078-1.527111L21.311382 15.791182 21.826772 15.641467 22.342162 15.862589 22.857552 16.441138l1.03078 1.887087 1.03078 1.894252L25.434503 20.778483 25.949893 20.918844 26.465283 20.600297l.51539-.748469 1.03078-2.329262 1.03078-2.24271.51539-.623168L30.073014 14.538279l.51539.425632.51539.923292 1.03078 2.764128 1.03078 2.566368L33.680744 21.894009 34.196135 21.978618 34.711525 21.438309 35.226915 20.338218l2.06156-6.047464L37.803865 13.575329 38.319256 13.535371 38.834646 14.196227 39.350036 15.473029l2.06156 6.71809L41.926986 22.932112 42.442377 22.917582 42.957767 22.131613 43.473157 20.679516l2.06156-7.340615L46.050107 12.585222 46.565497 12.663164 47.080888 13.577831 47.596278 15.202935l1.54617 6.389179L49.657838 23.117561 50.173228 23.871713 50.688618 23.72224 51.204009 22.676109 51.719399 20.880997l1.54617-6.855223L53.780959 12.441158 54.296349 11.698141 54.811739 11.9265 55.32713 13.106045 55.84252 15.067407l1.54617 7.285514L57.90408 23.982944 58.41947 24.703785 58.93486 24.389972 59.450251 23.075968 59.965641 20.95301l1.54617-7.678648L62.027201 11.612473 62.542591 10.924272 63.057981 11.329249 63.573372 12.777742l1.03078 5.042882L65.634932 23.089597 66.150322 24.770043 66.665712 25.41577 67.181102 24.914856 67.696492 23.332948 68.727273 18" style="fill:none;stroke:#1a0dcc;stroke-linecap:square;stroke-width:1.5"/></g></g></g><defs><clipPath id="p12c0a407d9"><rect height="36" width="72" x="0" y="0"/></clipPath></defs></svg>
</span>
+
<span class=svgi><svg height="36pt" viewBox="0 0 72 36" width="72pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="figure_1"><g id="patch_1"><path d="M0 36H72V0H0z" style="fill:none"/></g><g id="axes_1"><g id="line2d_1"><path clip-path="url(#p4619e8d299)" d="M3.272727 18l1.030781-3.765472.51539-1.416915.51539-.937961.51539-.386134L6.365068 11.681743 6.880458 12.415541l.51539 1.202923 1.03078 3.319764 1.030781 3.513197.51539 1.443097.51539 1.065858L11.003579 23.565993 11.518969 23.671277 12.034359 23.281442 12.549749 22.445234l1.030781-2.635772 1.54617-4.432216.51539-1.086447.51539-.726886.51539-.316604L17.188261 13.353757 17.703651 13.858304 18.219041 14.70187l1.03078 2.338554 1.03078 2.470092.51539 1.013924L21.311382 21.276531l.51539.435962L22.342162 21.808204l.51539-.237644L23.372942 21.035494l1.03078-1.702414 1.546171-2.852714L26.465283 15.782941 26.980673 15.313492 27.496063 15.100993 28.011453 15.150239 28.526843 15.442672l1.03078 1.142496 2.061561 2.758049L32.134574 19.777248 32.649964 20.030023 33.165354 20.091044 33.680744 19.967512l1.030781-.695331 2.57695-2.319077L37.803865 16.719605 38.319256 16.615856 38.834646 16.640577 39.865426 17.014759l3.092341 1.679622 1.03078.110709L45.019327 18.631471 48.111668 17.714971 49.142448 17.648878 50.688618 17.792429 52.750179 18.025421 54.811739 17.992733 56.8733 17.940105l2.06156.186211 2.061561.156838L62.542591 18.141656l3.607731-.589212L67.181102 17.632444 68.727273 18" style="fill:none;stroke:#cc0d1a;stroke-linecap:square;stroke-width:1.5"/></g></g></g><defs><clipPath id="p4619e8d299"><rect height="36" width="72" x="0" y="0"/></clipPath></defs></svg>
</span>
=
<span class=svgi><svg height="36pt" viewBox="0 0 72 36" width="72pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="figure_1"><g id="patch_1"><path d="M0 36H72V0H0z" style="fill:none"/></g><g id="axes_1"><g id="line2d_1"><path clip-path="url(#p320c124c7d)" d="M3.272727 18l1.030781-3.843589.51539-1.492802.51539-1.007153.51539-.42107L6.365068 11.445756l.51539.824816.51539 1.359277 1.03078 3.733646 1.030781 3.797383.51539 1.436361L10.488189 23.527394l.51539.345602L11.518969 23.623281 12.034359 22.834729l1.030781-2.69276 1.03078-3.056972.51539-1.253071.51539-.912205L15.64209 14.403304l.51539-.120384.51539.227212L17.188261 15.000628l2.57695 3.108863L20.795991 18.791283l2.061561 1.220415 1.03078.580015L24.403722 20.689369 24.919112 20.555522 25.434503 20.132505 25.949893 19.399209l1.03078-2.23389 1.03078-2.492515L28.526843 13.734837l.51539-.515703L29.557623 13.241856 30.073014 13.853625l.51539 1.171372 1.03078 3.498508 1.03078 3.579521L33.165354 23.308743 33.680744 23.86152 34.196135 23.661183 34.711525 22.710489 35.226915 21.11931l2.06156-7.875452L37.803865 12.294934 38.319256 12.151227 38.834646 12.836804 39.350036 14.253993l2.06156 7.910602L41.926986 23.205633 42.442377 23.437028 42.957767 22.825995 43.473157 21.469213l2.06156-7.656646L46.050107 12.879496 46.565497 12.776185 47.080888 13.525376 47.596278 15.014732l2.06156 7.775781L50.173228 23.596116 50.688618 23.514669 51.204009 22.541863 51.719399 20.815029l1.54617-6.747982L53.780959 12.479096 54.296349 11.717791 54.811739 11.919234 55.32713 13.070634 55.84252 15.009995l1.54617 7.308489L57.90408 23.991093 58.41947 24.767633 58.93486 24.516287 59.450251 23.263612 59.965641 21.192338l1.54617-7.653321L62.027201 11.82922 62.542591 11.065928 63.057981 11.374104 63.573372 12.712357 64.088762 14.877851l1.54617 7.784806L66.150322 24.322487 66.665712 24.987951 67.181102 24.5473 67.696492 23.062357 68.727273 18" style="fill:none;stroke:#e61ae6;stroke-linecap:square;stroke-width:1.5"/></g></g></g><defs><clipPath id="p320c124c7d"><rect height="36" width="72" x="0" y="0"/></clipPath></defs></svg>
</span>
=
<span class=svgi><svg height="36pt" viewBox="0 0 72 36" width="72pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="figure_1"><g id="patch_1"><path d="M0 36H72V0H0z" style="fill:none"/></g><g id="axes_1"><g id="line2d_1"><path clip-path="url(#p12c0a407d9)" d="M3.272727 18 4.818898 17.845997l1.03078-.104129L6.880458 17.855032l1.54617.570235L9.457409 18.709453 9.972799 18.702718 10.488189 18.567014 11.518969 17.952004l1.546171-1.059359L13.58053 16.762056 14.09592 16.825713 14.61131 17.094047l1.03078 1.018458 1.03078 1.150318L17.188261 19.646872 17.703651 19.793136 18.219041 19.657607l.51539-.417182 1.03078-1.446471 1.03078-1.527111L21.311382 15.791182 21.826772 15.641467 22.342162 15.862589 22.857552 16.441138l1.03078 1.887087 1.03078 1.894252L25.434503 20.778483 25.949893 20.918844 26.465283 20.600297l.51539-.748469 1.03078-2.329262 1.03078-2.24271.51539-.623168L30.073014 14.538279l.51539.425632.51539.923292 1.03078 2.764128 1.03078 2.566368L33.680744 21.894009 34.196135 21.978618 34.711525 21.438309 35.226915 20.338218l2.06156-6.047464L37.803865 13.575329 38.319256 13.535371 38.834646 14.196227 39.350036 15.473029l2.06156 6.71809L41.926986 22.932112 42.442377 22.917582 42.957767 22.131613 43.473157 20.679516l2.06156-7.340615L46.050107 12.585222 46.565497 12.663164 47.080888 13.577831 47.596278 15.202935l1.54617 6.389179L49.657838 23.117561 50.173228 23.871713 50.688618 23.72224 51.204009 22.676109 51.719399 20.880997l1.54617-6.855223L53.780959 12.441158 54.296349 11.698141 54.811739 11.9265 55.32713 13.106045 55.84252 15.067407l1.54617 7.285514L57.90408 23.982944 58.41947 24.703785 58.93486 24.389972 59.450251 23.075968 59.965641 20.95301l1.54617-7.678648L62.027201 11.612473 62.542591 10.924272 63.057981 11.329249 63.573372 12.777742l1.03078 5.042882L65.634932 23.089597 66.150322 24.770043 66.665712 25.41577 67.181102 24.914856 67.696492 23.332948 68.727273 18" style="fill:none;stroke:#1a0dcc;stroke-linecap:square;stroke-width:1.5"/></g></g></g><defs><clipPath id="p12c0a407d9"><rect height="36" width="72" x="0" y="0"/></clipPath></defs></svg>
</span>
-
<span class=svgi><svg height="36pt" viewBox="0 0 72 36" width="72pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="figure_1"><g id="patch_1"><path d="M0 36H72V0H0z" style="fill:none"/></g><g id="axes_1"><g id="line2d_1"><path clip-path="url(#p4b9a36d3ff)" d="M3.272727 18l1.030781 3.765472.51539 1.416915L5.334288 24.120348 5.849678 24.506482 6.365068 24.318257l.51539-.733798.51539-1.202923 1.03078-3.319764 1.030781-3.513197.51539-1.443097.51539-1.065858.51539-.605613L11.518969 12.328723l.51539.389835L12.549749 13.554766l1.030781 2.635772 1.54617 4.432216.51539 1.086447.51539.726886L16.67287 22.752691 17.188261 22.646243 17.703651 22.141696 18.219041 21.29813l1.03078-2.338554 1.03078-2.470092.51539-1.013924L21.311382 14.723469l.51539-.435962L22.342162 14.191796l.51539.237644L23.372942 14.964506l1.03078 1.702414 1.546171 2.852714L26.465283 20.217059 26.980673 20.686508 27.496063 20.899007 28.011453 20.849761 28.526843 20.557328l1.03078-1.142496 2.061561-2.758049L32.134574 16.222752 32.649964 15.969977 33.165354 15.908956 33.680744 16.032488l1.030781.695331 2.57695 2.319077L37.803865 19.280395 38.319256 19.384144 38.834646 19.359423 39.865426 18.985241l3.092341-1.679622 1.03078-.110709L45.019327 17.368529 48.111668 18.285029 49.142448 18.351122 50.688618 18.207571 52.750179 17.974579 54.811739 18.007267 56.8733 18.059895l2.06156-.186211 2.061561-.156838L62.542591 17.858344l3.607731.589212L67.181102 18.367556 68.727273 18" style="fill:none;stroke:#33f2e6;stroke-linecap:square;stroke-width:1.5"/></g></g></g><defs><clipPath id="p4b9a36d3ff"><rect height="36" width="72" x="0" y="0"/></clipPath></defs></svg>
</span>
</p>
</blockquote>
<p>The first thing to notice about this is if we add a signal to itself, phase inverted, we get silence.</p>
<blockquote>
<p>
<span class=svgi><svg height="36pt" viewBox="0 0 72 36" width="72pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="figure_1"><g id="patch_1"><path d="M0 36H72V0H0z" style="fill:none"/></g><g id="axes_1"><g id="line2d_1"><path clip-path="url(#p5797117576)" d="M3.272727 18 4.818898 7.930427 5.849678 2.95669l.51539-1.649704.51539-.998091.51539-.307518.51539.395058L8.426628 1.478649 8.942019 3.205774l1.03078 5.096769 1.54617 10.142677 1.546171 9.990308 1.03078 4.847661.51539 1.571273L15.1267 35.76782 15.64209 35.98761 16.15748 35.505254l.51539-1.165674L17.188261 32.536089l1.03078-5.216682 1.54617-10.209574 1.546171-9.90493 1.03078-4.71862.51539-1.49188.51539-.828065.51539-.131929.51539.569359.51539 1.248422L25.434503 3.730942l1.03078 5.333403 1.54617 10.270225 1.54617 9.813491 1.030781 4.586692.51539 1.411574L31.619184 35.888593 32.134574 35.932578 32.649964 35.276565 33.165354 33.94616 33.680744 31.993296l1.030781-5.446861L38.319256 4.006704 38.834646 2.05384 39.350036.723435 39.865426.067422 40.380816.111407 40.896206.853673 41.411596 2.265247 41.926986 4.291028l1.030781 5.556986 3.09234 19.9853L46.565497 32.269058 47.080888 34.14781 47.596278 35.396232 48.111668 35.965591 48.627058 35.833662 49.142448 35.005597 49.657838 33.513717 50.173228 31.416259l1.030781-5.66371 3.09234-19.917732L54.811739 3.463911 55.32713 1.66042 55.84252.494746 56.35791.01239 56.8733.23218 57.38869 1.145538 57.90408 2.716811 58.41947 4.884662l1.030781 5.76697 3.09234 19.837976L63.057981 32.794226 63.573372 34.521351 64.088762 35.603565 64.604152 35.998623 65.119542 35.691105 65.634932 34.693014 66.150322 33.04331 66.665712 30.806391 67.696492 24.93969 68.727273 18" style="fill:none;stroke:#cc0d1a;stroke-linecap:square;stroke-width:1.5"/></g></g></g><defs><clipPath id="p5797117576"><rect height="36" width="72" x="0" y="0"/></clipPath></defs></svg>
</span>
+
<span class=svgi><svg height="36pt" viewBox="0 0 72 36" width="72pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="figure_1"><g id="patch_1"><path d="M0 36H72V0H0z" style="fill:none"/></g><g id="axes_1"><g id="line2d_1"><path clip-path="url(#pa94d880bf0)" d="M3.272727 18 4.818898 28.069573l1.03078 4.973737.51539 1.649704L6.880458 35.691105 7.395848 35.998623 7.911238 35.603565 8.426628 34.521351 8.942019 32.794226l1.03078-5.096769 1.54617-10.142677L13.06514 7.564472l1.03078-4.847661.51539-1.571273L15.1267.23218l.51539-.21979.51539.482356.51539 1.165674L17.188261 3.463911l1.03078 5.216682 1.54617 10.209574 1.546171 9.90493 1.03078 4.71862.51539 1.49188L23.372942 35.833662 23.888332 35.965591 24.403722 35.396232l.51539-1.248422L25.434503 32.269058l1.03078-5.333403 1.54617-10.270225 1.54617-9.813491 1.030781-4.586692.51539-1.411574.51539-.742266.51539-.043985L32.649964.723435 33.165354 2.05384 33.680744 4.006704l1.030781 5.446861 3.607731 22.539731L38.834646 33.94616 39.350036 35.276565 39.865426 35.932578 40.380816 35.888593 40.896206 35.146327 41.411596 33.734753 41.926986 31.708972l1.030781-5.556986 3.09234-19.9853L46.565497 3.730942 47.080888 1.85219 47.596278.603768 48.111668.034409 48.627058.166338 49.142448.994403 49.657838 2.486283 50.173228 4.583741l1.030781 5.66371 3.09234 19.917732L54.811739 32.536089 55.32713 34.33958 55.84252 35.505254 56.35791 35.98761 56.8733 35.76782 57.38869 34.854462 57.90408 33.283189 58.41947 31.115338l1.030781-5.76697 3.09234-19.837976L63.057981 3.205774 63.573372 1.478649 64.088762.396435 64.604152.001377 65.119542.308895 65.634932 1.306986 66.150322 2.95669 66.665712 5.193609 67.696492 11.06031 68.727273 18" style="fill:none;stroke:#33f2e6;stroke-linecap:square;stroke-width:1.5"/></g></g></g><defs><clipPath id="pa94d880bf0"><rect height="36" width="72" x="0" y="0"/></clipPath></defs></svg>
</span>
=
<span class=svgi><svg height="36pt" viewBox="0 0 72 36" width="72pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="figure_1"><g id="patch_1"><path d="M0 36H72V0H0z" style="fill:none"/></g><g id="axes_1"><g id="line2d_1"><path clip-path="url(#p6acbd377c5)" d="M3.272727 18H68.727273" style="fill:none;stroke:#777;stroke-linecap:square;stroke-width:1.5"/></g></g></g><defs><clipPath id="p6acbd377c5"><rect height="36" width="72" x="0" y="0"/></clipPath></defs></svg>
</span>
</p>
</blockquote>
<p>There is a vocals isolation trick that relies on this. That&rsquo;s not what this post is about.</p>
<p>What we&rsquo;re interested in is signals before and after applying an audio effect. Some audio plugins have this built-in; Ableton&rsquo;s EQ8 allows you to listen to each equaliser band in isolation. You could always do this yourself by flipping the phase of the equalised signal and mixing it back in with the original. Doing so in a DAW can be cumbersome, so when plugins do it for you, it can be very nice if this is all you want. But there is nothing stopping you taking the difference of a whole chain of effects, and you have to do it yourself for plugins that don&rsquo;t have this feature.</p>
<p>But there&rsquo;s a consequence to this that is not obvious. We can add the difference signal to the dry signal to recreate the wet signal. Algebraically, <code>b[n] = a[n] + (b[n] - a[n])</code>. <em>This</em> is what this post is about. Whenever we have an effect in a signal chain, we can interpret the effect as <em>mixing in</em> a difference signal to change the dry audio to the wet audio, and we are free to do any processing we want on the difference signal. Now, this is an interpretation, and it&rsquo;s a wrong one. But we can have some fun with it.</p>
<p>By the way, I&rsquo;m trying to keep this post DAW-agnostic but at the end I describe how I do this in Ableton Live in a self-contained way that doesn&rsquo;t involve six hundred sends. So, check that out if you&rsquo;re confused how to actually do this in a DAW.</p>
<h3 id=drywet-mixing>Dry/Wet Mixing</h3>
<p>The simplest thing we can do with the difference signal idea is to implement dry/wet mixing. This is less useful for single effects, which have this built in, than it is for effect chains, which don&rsquo;t.</p>
<p>This is easy: turn the gain down on the difference signal. This will fade between from the wet to the dry signal. But if you&rsquo;re willing to deal with a little algebra I think it&rsquo;s worth exploring to what extent this is really dry/wet mixing, or something else. In dry/wet mixing, we mix two signals in such a way that the net gain sums to one,</p>
<blockquote>
<p><code>c[n] = g*a[n] + (1 - g)*b[n]</code>,</p>
</blockquote>
<p>where <code>g</code> fades between <code>a</code> when <code>g</code> is 0 (-∞ dB) and <code>b</code> when <code>g</code> is 1 (0 dB). By multiplying out and regathering we get</p>
<blockquote>
<p><code>c[n] = b[n] + g*(a[n] - b[n])</code></p>
</blockquote>
<p>so a dry/wet mix knob is directly equivalent to mixing in the difference signal. Note that <code>a</code> and <code>b</code> have swapped around; the phase of the difference signal has been inverted. In practice, you get to choose which way you want, which I&rsquo;ll touch on later.</p>
<p>This is no big deal. Putting an effect chain on a return track and balancing it with the source track will be easiser most of the time.</p>
<h3 id=filters>Filters</h3>
<p>This is well known among DSP people. A highpass filter can be made from a lowpass filter by subtracting the filtered signal from the original: <code>hp[n] = x[n] - lp[n]</code>. It works the other way around, too, and with bandpass filters. If you think about this for a moment this is kind of obvious but may be surprising. If a lowpass filter removes high frequencies, then whatever is left are low frequencies, and subtracting those from the original signal will get rid of those low frequencies. But our differencing operation operates on single samples from each signal&ndash;independent of any samples before or after&ndash;and a single sample is just a number without any frequency information. So, given a lowpass filter, there is some highpass filter for which we can know the value of <code>hp[n]</code> knowing only the two samples <code>x[n]</code> and <code>lp[n]</code>. Showing why this works mathematically isn&rsquo;t hard<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> but something cool is happening here and I think it would be a mistake to dismiss it as obvious.</p>
<p>With a little tinkering we can start making bandpass and bandstop filters the same way, and go on to shelving and bell filters. But all we&rsquo;ve done so far is recreate things we can already do, and I want to get to the good stuff.</p>
<h3 id=multiband-compression>Multiband Compression</h3>
<p>The reason why you&rsquo;d want to use the filters described above is that we can recover the original signal exactly by mixing them together again: <code>x[n] = lp[n] + hp[n]</code>. We don&rsquo;t have to think about how we parameterise the filters or anything because we&rsquo;ve used our phase inversion trick to make one filter from the other. Now all that is left is to compress just one of those filtered signals, do the sum, and we have a multiband compressor. Building this out in a DAW can be tricky but, to be clear here, it lets you combine <em>any</em> set of filter plugins and <em>any</em> set of compressor plugins into a multiband compressor. That includes parametric equalisers, and doesn&rsquo;t have the weird overlapping spectrums that throwing bandpass filters around everywhere does.<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></p>
<p>To do this, you need to remove the frequencies you want to compress, compress the difference signal, then add it back to the filtered signal. Before, we were adding the difference signal to the dry signal. Now, we&rsquo;re adding the processed difference signal to the wet signal. We could have used the dry signal; we have a choice here between <code>a[n] + compress(b - a)[n]</code> and <code>b[n] + compress(a - b)[n]</code>. For compression, I find the latter much easier to reason about. The opposite way still works, but you&rsquo;re adding in a phase-inverted copy of compressed frequencies to the dry signal. I have no intuition for that.</p>
<h3 id=compressors>Compressors</h3>
<p>The above has a degree of conceptual elegance, which we&rsquo;ll now dispense with. Let&rsquo;s take the signal</p>
<blockquote>
<span class=svg><svg height="108pt" viewBox="0 0 475.2 108" width="475.2pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="figure_1"><g id="patch_1"><path d="M0 108H475.2V0H0z" style="fill:none"/></g><g id="axes_1"><g id="line2d_1"><path clip-path="url(#pc18caf8bee)" d="M21.6 54.435059 21.913498 23.977661 22.226996 72.290588 22.540493 76.054504 22.853991 34.583862 23.167489 26.106812 23.480987 61.982666 23.794485 76.347839 24.107983 61.339966 24.42148 65.942688 24.734978 78.172119 25.048476 67.411011 25.361974 32.599731 25.675472 40.653259 25.98897 35.147461 26.302467 23.722229 26.615965 25.131226 26.929463 54.728394 27.242961 73.773743 27.556459 68.859558 27.869956 68.356934 28.183454 80.034302 28.496952 77.007019 28.81045 56.672974 29.123948 49.283569 29.437446 55.115662 30.064441 29.791626 30.377939 27.520752 31.004935 50.613464 31.318433 54.085693 31.63193 65.464783 31.945428 72.567444 32.258926 74.56311 32.572424 68.121277 33.199419 62.335327 33.826415 42.772522 34.139913 36.432861 34.453411 34.6745 34.766909 34.183411 35.080406 39.051453 35.707402 62.42926 36.0209 67.495056 36.334398 69.437988 36.647896 72.397705 36.961393 72.106018l1.567489-37.250244L38.84238 31.16272 39.155878 35.683044l1.253991 33.296814L40.723367 72.24939 41.036865 71.623169 41.350363 68.787048 41.663861 63.81189 42.604354 41.60907 42.917852 36.190613 43.23135 33.689026 43.544848 35.961548 44.171843 53.823669 44.798839 68.780457 45.112337 72.661377 45.425835 73.239807 45.739332 69.828552 46.679826 47.12146 47.306821 32.449768 47.620319 32.433289 47.933817 38.145081 48.874311 65.285156 49.187808 70.62616 49.501306 72.593811 49.814804 71.473206 50.128302 67.557678l1.567489-33.295166L52.009289 33.829102 52.322787 38.850403 53.576778 70.9953 53.890276 73.340332 54.203774 72.190063 54.517271 67.440674l1.56749-35.643494L56.398258 34.153748 57.025254 51.343506 57.65225 67.717529 57.965747 71.65448 58.279245 72.455383 58.592743 70.166382 58.906241 64.861633l1.253991-28.089294L60.47373 33.545654 60.787228 35.481995 61.100726 42.24353 62.041219 68.052063 62.354717 72.229614 62.668215 73.117859 62.981713 70.565186 63.608708 56.735596 64.549202 33.527527 64.8627 32.197632 65.176197 36.826721l1.253992 32.708496L66.743687 72.201599 67.057184 71.746765 67.370682 68.193787 68.938171 35.112854 69.251669 33.873596 69.565167 37.929199l1.253991 32.052613L71.132656 72.789917 71.446154 72.298828 71.759652 68.340454 72.700145 45.013733 73.013643 37.029419 73.327141 32.441528 73.640639 33.614868 73.954136 40.200073 74.89463 66.387634 75.208128 70.835449 75.521626 72.223022 75.835123 70.495972 76.148621 65.800964l1.253991-27.71521L77.71611 34.185059 78.029608 35.112854 78.343106 41.010864 79.283599 66.687561 79.597097 71.349609 79.910595 72.808044 80.224093 70.93103 80.537591 65.586731l1.253991-30.782043L82.10508 32.380554 82.418578 35.945068l1.253991 32.481079L83.986067 71.600098 84.299565 71.707214 84.613062 68.747498 85.240058 55.385925 86.180552 36.231812 86.494049 34.102661 86.807547 37.174438 87.434543 53.822021 88.061538 68.805176 88.375036 72.157104 88.688534 72.252686 89.002032 68.996338 89.629028 54.840454 90.569521 33.324829 90.883019 33.351196 91.196517 38.988831 92.13701 65.029724 92.450508 69.932373 92.764006 71.840698 93.077504 70.687134 93.391001 66.598572l1.253992-27.148316L94.958491 34.977722 95.271988 34.928284 95.585486 39.931458 96.52598 65.276917 96.839478 70.387207 97.152975 72.399353 97.466473 71.156799 97.779971 66.516174 99.34746 32.790894 99.660958 35.254578 100.287954 51.945007 100.914949 67.246216 101.228447 70.912903 101.541945 71.563843 101.855443 69.190796 102.16894 63.973389 103.109434 43.238892 103.422932 37.429871 103.73643 34.517944 104.049927 36.600952 104.363425 43.204285 105.303919 67.579102 105.617417 71.417175 105.930914 72.099426 106.244412 69.518738 106.871408 56.223083 107.811901 34.38446 108.125399 33.293518 108.438897 37.940735l1.253991 31.014404L110.006386 71.372681 110.319884 70.774475 110.633382 67.249512 112.200871 35.912109 112.514369 34.936523 112.827866 39.010254l1.253992 30.345337L114.395356 71.891785 114.708853 71.262268 115.022351 67.325317 115.962845 45.129089 116.276343 37.673767 116.58984 33.422058 116.903338 34.758545 117.216836 41.230042 118.157329 66.025085 118.470827 70.131775 118.784325 71.310059 119.097823 69.515442 119.411321 64.909424l1.253991-26.227112L120.97881 35.104614 121.292308 36.215332 121.605806 42.011169 122.546299 66.292053 122.859797 70.599792 123.173295 71.837402 123.486792 69.891174 123.80029 64.658936l1.253992-29.071473L125.367779 33.448425 125.681277 37.06897 126.935269 67.911987 127.248766 70.81073 127.562264 70.759644 127.875762 67.791687 128.502758 54.997009 129.443251 37.016235 129.756749 36.319153 130.070247 23.44043 130.383745 73.510071 130.697242 42.154541 131.01074 29.643311 131.324238 72.394409 131.637736 83.984436 131.951234 53.873108 132.264731 70.850281 132.578229 74.243408 132.891727 70.543762 133.205225 43.604736 133.518723 28.094238 133.832221 45.16864 134.145718 43.184509 134.459216 39.524414 134.772714 50.425598 135.086212 66.605164 135.39971 68.622253 135.713208 62.149109 136.026705 63.617432 136.340203 77.613464 136.653701 69.91095 136.967199 47.409851 137.280697 50.087769 137.594194 53.822021 137.907692 39.873779 138.22119 34.857422 138.534688 34.466858 138.848186 46.276062 139.161684 48.515625 139.475181 53.227112 140.102177 70.909607 140.415675 67.453857 141.042671 63.907471 141.356168 59.225647 141.983164 43.642639 142.61016 38.154968 142.923657 37.240356 143.237155 42.69342 143.864151 59.71344 144.804644 70.301514 145.118142 68.422852 146.685631 40.015503 146.999129 37.677063 147.312627 39.425537 147.939623 49.372559 148.566618 64.855042 148.880116 68.202026 149.193614 68.726074 149.507112 68.165771 149.82061 64.653992 150.761103 44.432007 151.074601 39.173401 151.388099 36.363647 151.701597 38.250549 153.269086 68.477234 153.582583 69.390198 153.896081 67.157227 154.523077 57.243164 155.46357 40.341797 155.777068 37.874817 156.090566 39.13385 156.404064 43.840393 157.344557 64.668823 157.658055 68.338806 157.971553 69.50061 158.285051 67.879028 158.598549 63.264771 159.85254 38.402161 160.166038 36.460876 160.479536 39.267334 162.047025 68.55304 162.360522 68.991394 162.67402 66.868835 162.987518 62.473755 164.241509 40.089661 164.555007 37.828674 164.868505 39.501343 165.182003 44.585266 166.122496 64.690247 166.435994 68.121277 166.749492 68.965027 167.06299 67.124268 167.376488 62.813232 168.630479 40.439026 168.943977 37.879761 169.257475 39.267334 169.570972 44.115601 170.511466 64.301331 170.824964 67.890564 171.138462 68.892517 171.451959 67.297302 171.765457 63.264771 173.019448 40.859253 173.332946 38.036316 173.646444 39.049805 173.959942 43.647583 174.900435 63.833313 175.213933 67.62854 175.527431 68.869446 175.840929 67.476929 176.154427 63.627319 177.408418 41.277832 177.721916 38.204407 178.035414 38.889954 178.348911 43.227356 179.289405 63.365295 179.602903 67.346741 179.916401 68.787048 180.229898 67.608765 180.543396 63.97998 181.797388 41.709595 182.110885 38.400513 182.424383 38.766357 182.737881 42.825256 183.991872 67.03363 184.30537 68.686523 184.618868 67.727417 184.932366 64.314514 186.499855 38.644409 186.813353 38.66748 187.126851 42.441284 188.380842 66.710632 188.69434 68.567871 189.007837 67.834534 189.321335 64.616089 190.888824 38.911377 191.202322 38.591675 191.51582 42.088623 192.769811 66.377747 193.083309 68.426147 193.396807 67.908691 193.710305 64.90448 195.277794 39.657898 195.591292 39.280518 195.90479 42.306152 197.158781 64.439758 197.472279 66.908386 197.785776 67.10614 198.099274 64.988525 198.72627 55.412292 199.353266 45.424072 199.666763 41.707947 199.980261 40.17865 200.293759 41.750793 200.607257 45.94812 201.54775 62.979675 201.861248 66.173401 202.174746 67.120972 202.488244 65.744934 202.801742 62.241394 204.055733 42.777466 204.369231 40.409363 204.682729 41.012512 204.996226 44.473206 206.250218 65.342834 206.563716 66.995728 206.877213 66.344788 207.190711 63.47406 208.7582 40.954834 209.071698 40.570862 209.385196 43.205933 210.012192 54.131836 210.639187 64.289795 210.952685 66.652954 211.266183 66.718872 211.579681 64.525452 212.206676 55.025024 212.833672 45.308716 213.14717 41.757385 213.460668 40.424194 213.774165 42.159485 214.087663 46.419434 215.028157 63.067017 215.341655 66.082764 215.655152 66.868835 215.96865 65.36261 216.282148 61.806335 217.536139 42.770874 217.849637 40.607117 218.163135 41.375061 218.476633 44.934631 219.730624 65.304932 220.044122 66.788086 220.35762 65.998718 220.671118 63.062073 222.238607 41.075134 222.552104 40.882324 222.865602 43.650879 223.492598 54.51416 224.119594 64.322754 224.433091 66.489807 224.746589 66.418945 225.060087 64.126648 225.687083 54.70697 226.314078 45.244446 226.627576 42.091919 226.941074 41.254761 227.254572 43.144958 227.881567 52.389954 228.508563 62.017273 228.822061 64.818787 229.135559 65.654297 229.449057 64.444702 229.762554 61.369629 231.016546 44.278748 231.330044 42.327576 231.643541 42.70166 231.957039 45.404297 233.21103 63.513611 233.524528 65.342834 233.838026 65.133545 234.151524 62.94342 234.77852 54.318054 235.405515 45.822876 235.719013 43.062561 236.032511 42.296265 236.346009 43.932678 236.973004 52.480591 237.6 61.939819 237.913498 50.125671 238.226996 86.072388 238.853991 25.360291 239.480987 80.060669 240.107983 24.061707 240.42148 53.874756 240.734978 67.574158 241.048476 60.094116 241.361974 35.631958 241.675472 49.283569 241.98897 68.526672 242.302467 66.31842 242.615965 45.532837 242.929463 70.787659 243.242961 67.364868 243.869956 36.708069 244.496952 56.318665 245.123948 34.928284 245.437446 53.657227 245.750943 52.839844 246.064441 43.74646 246.377939 52.668457 246.691437 67.083069 247.004935 66.743591 247.318433 62.674805 247.63193 61.218018 247.945428 62.8396 248.258926 58.278076 248.572424 50.188293 248.885922 47.309326 249.199419 47.200562 249.512917 45.069763 249.826415 41.063599 250.139913 44.201294 250.453411 52.594299 250.766909 56.938293 251.080406 57.740845 251.707402 67.261047 252.0209 64.434814 252.334398 60.019958 252.647896 58.220398 252.961393 55.466675 253.588389 44.603394 253.901887 43.013123 254.215385 44.20459 254.528882 44.133728 254.84238 47.485657 255.469376 58.983398 256.409869 65.135193 256.723367 64.095337 257.977358 47.907532 258.290856 44.029907 258.604354 42.836792 258.917852 44.412231 259.544848 50.550842 260.171843 59.901306 260.485341 62.819824 260.798839 63.754211 261.112337 63.582825 261.425835 61.982666 262.993324 44.425415 263.306821 43.624512 263.620319 45.409241 264.247315 52.727783 264.874311 60.970825 265.187808 63.488892 265.501306 63.938782 265.814804 62.854431 266.128302 60.290222 267.382293 45.595459 267.695791 44.089233 268.009289 44.298523 268.322787 46.538086 269.576778 62.05188 269.890276 63.85968 270.203774 63.762451 270.517271 61.877197 271.144267 54.627869 271.771263 47.035767 272.084761 44.670959 272.398258 44.001892 272.711756 45.181824 273.025254 48.036072 274.279245 62.950012 274.592743 63.953613 274.906241 63.154358 275.219739 60.647827 276.47373 45.934937 276.787228 44.160095 277.100726 44.303467 277.414224 46.26947 278.041219 53.990112 278.668215 61.653076 278.981713 63.569641 279.29521 63.750916 279.608708 62.193604 280.235704 55.155212 280.8627 47.57959 281.176197 45.0401 281.489695 44.036499 281.803193 44.969238 282.116691 47.629028 283.370682 62.628662 283.68418 63.815186 283.997678 63.243347 284.311176 61.016968 285.878665 44.446838 286.192163 44.267212 286.50566 45.967896 287.132656 53.383667 287.759652 61.161987 288.073149 63.297729 288.386647 63.737732 288.700145 62.42926 289.013643 59.601379 290.267634 45.534485 290.581132 44.489685 290.89463 45.236206 291.208128 47.605957 292.462119 61.504761 292.775617 62.864319 293.089115 62.648438 293.402612 60.888428 294.029608 54.229065 294.656604 47.582886 294.970102 45.636658 295.283599 45.173584 295.597097 46.33374 295.910595 48.930908 297.164586 62.05188 297.478084 62.862671 297.791582 62.074951 298.10508 59.830444 299.359071 46.742432 299.672569 45.321899 299.986067 45.453735 300.299565 47.184082 300.92656 53.945618 301.553556 60.731873 301.867054 62.491882 302.180552 62.71106 302.494049 61.359741 303.121045 55.163452 303.748041 48.331055 304.061538 46.09314 304.375036 45.22467 304.688534 45.969543 305.002032 48.212402 306.256023 61.519592 306.569521 62.71106 306.883019 62.335327 307.196517 60.461609 308.764006 45.631714 309.077504 45.359802 309.391001 46.67981 310.017997 52.960144 310.644993 59.995239 310.958491 62.094727 311.271988 62.714355 311.585486 61.756897 311.898984 59.410217 313.152975 46.627075 313.466473 45.392761 313.779971 45.710815 314.093469 47.577942 314.720464 54.38562 315.34746 60.893372 315.660958 62.460571 315.974456 62.495178 316.287954 61.000488 316.914949 54.726746 317.541945 48.106934 317.855443 46.048645 318.16894 45.366394 318.482438 46.27771 318.795936 48.632629 320.049927 61.603638 320.363425 62.617126 320.676923 62.056824 320.990421 60.067749 322.244412 47.299438 322.55791 45.847595 322.871408 45.880554 323.184906 47.385132 323.811901 53.441345 324.438897 59.683777 324.752395 61.455322 325.065893 61.868958 325.37939 60.899963 325.692888 58.686768 326.94688 47.248352 327.260377 46.262878 327.573875 46.648499 327.887373 48.392029 328.514369 54.500977 329.141364 60.285278 329.454862 61.651428 329.76836 61.616821 330.081858 60.229248 330.708853 54.533936 331.335849 48.609558 331.649347 46.809998 331.962845 46.274414 332.276343 47.12146 332.58984 49.235779 333.843832 60.834045 334.157329 61.748657 334.470827 61.269104 334.784325 59.467896 336.351814 46.52655 336.665312 46.445801 336.97881 47.721313 337.605806 53.337524 338.232801 59.461304 338.546299 61.250977 338.859797 61.702515 339.173295 60.773071 339.486792 58.619202 340.740784 47.363708 341.054282 46.386475 341.367779 46.757263 341.681277 48.453003 342.308273 54.451538 342.935269 60.153442 343.248766 61.517944 343.562264 61.508057 343.875762 60.150146 344.502758 54.565247 345.129753 48.769409 345.443251 47.014343 345.756749 54.983826 346.070247 49.567017 346.383745 70.973877 346.697242 34.241089 347.01074 48.395325 347.324238 54.973938 347.637736 84.618896 348.264731 26.723145 348.891727 83.315369 349.205225 42.159485 349.832221 55.110718 350.145718 61.155396 350.459216 33.422058 351.086212 52.404785 351.39971 58.024292 351.713208 42.17926 352.340203 64.892944 352.653701 63.291138 352.967199 51.816467 353.280697 54.939331 353.594194 61.600342 353.907692 55.216187 354.22119 42.337463 354.848186 53.14801 355.161684 46.602356 355.475181 43.898071 356.102177 59.294861 356.415675 55.344727 356.729173 54.791016 357.042671 62.526489 357.356168 64.868225 357.669666 58.40332 357.983164 54.411987 358.296662 55.247498 358.61016 55.273865 358.923657 47.714722 359.237155 45.463623 359.550653 48.657349 359.864151 50.252563 360.177649 48.441467 360.491147 50.786499 360.804644 56.473572 361.118142 58.927368 361.43164 59.133362 361.745138 59.952393 362.058636 61.620117 362.372134 59.423401 362.685631 55.610046 363.626125 49.054504 363.939623 46.546326 364.25312 47.109924 365.507112 55.970947 365.82061 59.397034 366.134107 60.527527 366.761103 60.166626 367.074601 58.734558 367.701597 52.442688 368.015094 50.152039 368.64209 47.179138 368.955588 47.182434 369.582583 51.623657 370.836575 60.834045 371.150073 60.509399 371.46357 59.357483 371.777068 57.531555 372.717562 49.421997 373.03106 47.968506 373.344557 47.38678 373.658055 47.754272 373.971553 49.53241 375.225544 59.790894 375.539042 60.832397 375.85254 60.431946 376.166038 58.879578 376.793033 53.947266 377.420029 48.827087 377.733527 47.594421 378.047025 47.446106 378.360522 48.352478 378.67402 50.318481 379.614514 58.469238 379.928012 60.160034 380.241509 60.763184 380.555007 60.110596 380.868505 58.273132 382.122496 48.364014 382.435994 47.385132 382.749492 47.604309 383.06299 48.942444 383.689985 53.99176 384.316981 59.120178 384.630479 60.456665 384.943977 60.6297 385.257475 59.612915 385.88447 54.886597 386.511466 49.7005 386.824964 48.092102 387.138462 47.541687 387.451959 48.167908 387.765457 49.848816 389.019448 59.232239 389.332946 60.09906 389.646444 59.876587 389.959942 58.619202 390.586938 54.016479 391.213933 49.497803 391.527431 48.250305 391.840929 48.011353 392.154427 48.838623 392.467925 50.598633 393.721916 59.509094 394.035414 60.075989 394.348911 59.548645 394.662409 58.00946 395.916401 49.038025 396.229898 48.083862 396.543396 48.181091 396.856894 49.318176 397.48389 53.823669 398.110885 58.507141 398.424383 59.781006 398.737881 60.000183 399.051379 59.131714 399.678374 54.97229 400.30537 50.227844 400.618868 48.665588 400.932366 48.02948 401.245864 48.457947 401.559361 49.881775 402.813353 58.985046 403.126851 59.940857 403.440348 59.812317 403.753846 58.632385 404.380842 54.171387 405.007837 49.667542 405.321335 48.385437 405.634833 48.077271 405.948331 48.841919 406.261829 50.527771 407.51582 59.369019 407.829318 59.988647 408.142816 59.518982 408.456313 58.060547 409.710305 49.192932 410.023803 48.197571 410.3373 48.232178 410.650798 49.304993 411.277794 53.683594 411.90479 58.343994 412.218287 59.655762 412.531785 59.930969 412.845283 59.12677 413.472279 55.094238 414.099274 50.390991 414.412772 48.810608 414.72627 48.120117 415.039768 48.48761 415.353266 49.847168 416.920755 59.830444 417.234253 59.754639 417.54775 58.657104 418.174746 54.31311 418.801742 49.855408 419.115239 48.604614 419.428737 48.324463 419.742235 49.059448 420.055733 50.672791 421.309724 58.831787 421.623222 59.431641 421.93672 59.059204 422.250218 57.7771 423.504209 49.749939 423.817707 48.805664 424.131205 48.767761 424.444702 49.677429 425.071698 53.548462 425.698694 57.790283 426.012192 59.041077 426.325689 59.359131 426.639187 58.711487 426.952685 57.218445 428.206676 49.397278 428.520174 48.719971 428.833672 48.965515 429.14717 50.122375 429.774165 54.237305 430.401161 58.233582 430.714659 59.215759 431.028157 59.242126 431.341655 58.325867 431.96865 54.484497 432.595646 50.386047 432.909144 49.123718 433.222642 48.719971 433.536139 49.252258 433.849637 50.644775 435.103628 58.591187 435.417126 59.303101 435.730624 59.032837 436.044122 57.872681 437.611611 48.925964 437.925109 48.810608 438.238607 49.603271 438.865602 53.325989 439.492598 57.56781 439.806096 58.889465 440.119594 59.296509 440.433091 58.74939 440.746589 57.346985 442.000581 49.581848 442.314078 48.815552 442.627576 48.975403 442.941074 50.028442 443.56807 54.013184 444.195065 58.02594 444.508563 59.087219 444.822061 59.205872 445.135559 58.396729 445.762554 54.688843 446.38955 50.595337 446.703048 49.280273 447.016546 48.797424 447.330044 49.227539 447.643541 50.511292 448.897533 58.413208 449.21103 59.197632 449.524528 59.037781 449.838026 57.963318 450.465022 54.023071 451.092017 50.150391 451.405515 49.06604 451.719013 48.843567 452.032511 49.550537 452.346009 51.050171 453.6 58.630737" style="fill:none;stroke:#e61ae6;stroke-linecap:square;stroke-width:1.5"/></g></g></g><defs><clipPath id="pc18caf8bee"><rect height="108" width="475.2" x="0" y="0"/></clipPath></defs></svg>
</span>
</blockquote>
<p>and use a compressor to flatten its peaks.</p>
<blockquote>
<span class=svg><svg height="108pt" viewBox="0 0 475.2 108" width="475.2pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="figure_1"><g id="patch_1"><path d="M0 108H475.2V0H0z" style="fill:none"/></g><g id="axes_1"><g id="line2d_1"><path clip-path="url(#p629da2a526)" d="M21.6 54.453186 21.913498 31.101746 22.226996 66.760071 22.540493 68.671692 22.853991 40.888916 23.167489 35.254578 23.480987 59.451416 23.794485 69.487427 24.107983 59.166321 24.42148 62.539673 24.734978 71.189758 25.048476 63.600952 25.361974 38.446655 25.675472 44.155151 25.98897 39.890259 26.302467 31.584595 26.615965 33.746704 27.242961 68.312439 27.556459 64.927551 27.869956 64.710022 28.183454 73.681458 28.496952 71.553955 28.81045 56.066528 29.123948 50.315186 29.437446 54.876709 30.064441 34.455322 30.377939 32.876587 31.004935 51.251221 31.318433 54.070862 31.63193 63.508667 31.945428 69.531921 32.258926 71.346313 32.572424 66.003662 33.199419 61.190002 34.139913 38.532349 34.453411 36.872864 34.766909 36.348816 35.080406 40.612061 35.707402 61.621765 36.0209 66.267334 36.334398 68.103149 36.647896 70.876648 36.961393 70.677246l1.567489-34.633301L38.84238 32.522278 39.155878 36.736084l1.253991 31.538452L40.723367 71.423767 41.036865 70.86676 41.350363 68.174011 41.663861 63.434509 42.604354 42.030945 42.917852 36.777283 43.23135 34.307007 43.544848 36.495483 43.858345 43.845337 44.485341 62.271057 44.798839 68.417908 45.112337 72.236206 45.425835 72.804749 45.739332 69.50061 46.679826 47.245056 47.306821 32.800781 47.620319 32.767822 47.933817 38.387329 48.874311 65.143433 49.187808 70.426758 49.501306 72.363098 49.814804 71.272156 50.128302 67.412659l1.567489-32.977112L52.009289 33.988953 52.322787 38.967407l1.253991 31.924072L53.890276 73.228271 54.203774 72.079651 54.517271 67.366516l1.56749-35.470459L56.398258 34.239441 57.025254 51.353394 57.65225 67.677979 57.965747 71.59845 58.279245 72.407593 58.592743 70.112 58.906241 64.827026l1.253991-28.013488L60.47373 33.591797 60.787228 35.519897 61.100726 42.271545 62.041219 68.03064 62.354717 72.198303 62.668215 73.083252 62.981713 70.533875 63.608708 56.730652 64.549202 33.542358 64.8627 32.220703 65.176197 36.841553l1.253992 32.682129L66.743687 72.195007 67.057184 71.728638 67.370682 68.183899 68.938171 35.11615 69.251669 33.891724 69.565167 37.934143l1.253991 32.036133L71.132656 72.793213 71.446154 72.290588 71.759652 68.330566 72.700145 45.015381 73.013643 37.037659 73.327141 32.451416 73.640639 33.623108 73.954136 40.198425 74.89463 66.377747 75.208128 70.828857 75.521626 72.209839 75.835123 70.491028 76.148621 65.792725l1.253991-27.706971L77.71611 34.185059 78.029608 35.121094 78.343106 41.012512 79.283599 66.690857 79.597097 71.343018 79.910595 72.799805 80.224093 70.93103 80.537591 65.581787l1.253991-30.777099L82.10508 32.380554 82.418578 35.945068l1.253991 32.476136L83.986067 71.59845 84.299565 71.702271 84.613062 68.754089 85.240058 55.382629 86.180552 36.221924 86.494049 34.109253 86.807547 37.171143 87.434543 53.831909 88.061538 68.808472 88.375036 72.150513 88.688534 72.255981 89.002032 68.99469 89.629028 54.838806 90.569521 33.321533 90.883019 33.349548 91.196517 38.985535 92.13701 65.026428 92.450508 69.932373 92.764006 71.837402 93.077504 70.69043 93.391001 66.603516l1.253992-27.158204L94.958491 34.97937 95.271988 34.93158 95.585486 39.924866 96.52598 65.276917 96.839478 70.388855 97.152975 72.401001 97.466473 71.156799 97.779971 66.522766 99.34746 32.794189 99.660958 35.249634 100.287954 51.949951 100.914949 67.252808 101.228447 70.907959 101.541945 71.557251 101.855443 69.189148 102.16894 63.971741 103.109434 43.227356 103.422932 37.428223 103.73643 34.514648 104.049927 36.604248 104.363425 43.204285 105.303919 67.577454 105.617417 71.415527 105.930914 72.10437 106.244412 69.51709 106.871408 56.224731 107.811901 34.377869 108.125399 33.298462 108.438897 37.947327l1.253991 31.012756L110.006386 71.372681 110.319884 70.782715 110.633382 67.246216 112.200871 35.915405 112.514369 34.93158 112.827866 39.006958l1.253992 30.346985L114.395356 71.891785 114.708853 71.258972 115.022351 67.328613 115.962845 45.129089 116.276343 37.667175 116.58984 33.413818 116.903338 34.768433 117.216836 41.221802 118.157329 66.023438 118.470827 70.133423 118.784325 71.306763 119.097823 69.518738 119.411321 64.914368l1.253991-26.22876L120.97881 35.101318 121.292308 36.213684 121.605806 42.011169 122.546299 66.292053 122.859797 70.596497 123.173295 71.840698 123.486792 69.892822 123.80029 64.658936l1.253992-29.073121L125.367779 33.450073 125.681277 37.080505 126.935269 67.915283 127.248766 70.807434 127.562264 70.756348 127.875762 67.798279 128.502758 55.000305 129.443251 36.99646 129.756749 36.282898 130.070247 33.512695 130.383745 67.300598 130.697242 45.81134 131.01074 36.922302 131.324238 67.10614 131.637736 73.917114 131.951234 53.909363 132.264731 65.578491 132.578229 68.15094 132.891727 65.735046 133.205225 46.505127 133.518723 35.093079 133.832221 47.469177 134.145718 45.87561 134.459216 43.011475 134.772714 51.251221 135.086212 63.797058 135.39971 65.496094 135.713208 60.479736 136.026705 61.73053 136.340203 73.177185 136.653701 67.055054 136.967199 48.545288 137.280697 50.735413 137.594194 53.848389 137.907692 42.007874 138.22119 37.625977 138.534688 37.171143 138.848186 47.301086 139.161684 49.199524 139.475181 53.327637 140.102177 69.044128 140.415675 66.033325 141.042671 62.954956 141.356168 58.74115 141.983164 44.512756 142.61016 39.364563 142.923657 38.453247 143.237155 43.484436 143.864151 59.350891 144.804644 69.398438 145.118142 67.676331 146.685631 40.597229 146.999129 38.323059 147.312627 39.9776 147.939623 49.53241 148.566618 64.51886 148.880116 67.786743 149.193614 68.304199 149.507112 67.783447 149.82061 64.372192 150.761103 44.651184 151.074601 39.494751 151.388099 36.713013 151.701597 38.552124 153.269086 68.254761 153.582583 69.172668 153.896081 66.971008 154.523077 57.206909 155.46357 40.496704 155.777068 38.051147 156.090566 39.277222 156.404064 43.935974 157.344557 64.584778 157.658055 68.230042 157.971553 69.38855 158.285051 67.786743 158.598549 63.2005 159.85254 38.49115 160.166038 36.55481 160.479536 39.339844 162.047025 68.490417 162.360522 68.935364 162.67402 66.822693 162.987518 62.439148 164.241509 40.132507 164.555007 37.878113 164.868505 39.539246 165.182003 44.609985 166.122496 64.665527 166.435994 68.088318 166.749492 68.93042 167.06299 67.099548 167.376488 62.800049 168.630479 40.452209 168.943977 37.90448 169.257475 39.282166 169.570972 44.127136 170.511466 64.279907 170.824964 67.87738 171.138462 68.879333 171.451959 67.289062 171.765457 63.256531 173.019448 40.870789 173.332946 38.037964 173.646444 39.059692 173.959942 43.66571 174.900435 63.828369 175.213933 67.625244 175.527431 68.861206 175.840929 67.463745 176.154427 63.624023 177.408418 41.277832 177.721916 38.206055 178.035414 38.894897 178.348911 43.225708 179.289405 63.360352 179.602903 67.338501 179.916401 68.782104 180.229898 67.615356 180.543396 63.978333 181.797388 41.707947 182.110885 38.412048 182.424383 38.769653 182.737881 42.815369 183.991872 67.036926 184.30537 68.688171 184.618868 67.734009 184.932366 64.30957 186.499855 38.639465 186.813353 38.66748 187.126851 42.446228 188.380842 66.715576 188.69434 68.571167 189.007837 67.822998 189.321335 64.617737 190.888824 38.906433 191.202322 38.598267 191.51582 42.091919 192.769811 66.372803 193.083309 68.434387 193.396807 67.907043 193.710305 64.897888 195.277794 39.66449 195.591292 39.282166 195.90479 42.3078 197.158781 64.447998 197.472279 66.910034 197.785776 67.099548 198.099274 64.991821 198.72627 55.418884 199.353266 45.415833 199.666763 41.716187 199.980261 40.183594 200.293759 41.754089 200.607257 45.944824 201.54775 62.979675 201.861248 66.175049 202.174746 67.127563 202.488244 65.743286 202.801742 62.241394 204.055733 42.777466 204.369231 40.414307 204.682729 41.00592 204.996226 44.468262 206.250218 65.336243 206.563716 66.99408 206.877213 66.346436 207.190711 63.483948 208.7582 40.954834 209.071698 40.56427 209.385196 43.205933 210.012192 54.133484 210.639187 64.296387 210.952685 66.641418 211.266183 66.717224 211.579681 64.5271 212.206676 55.023376 212.833672 45.300476 213.14717 41.752441 213.460668 40.429138 213.774165 42.161133 214.087663 46.417786 215.028157 63.070312 215.341655 66.07782 215.655152 66.860596 215.96865 65.377441 216.282148 61.807983 217.536139 42.770874 217.849637 40.605469 218.163135 41.378357 218.476633 44.931335 219.730624 65.296692 220.044122 66.789734 220.35762 66.00531 220.671118 63.057129 222.238607 41.066895 222.552104 40.880676 222.865602 43.649231 223.492598 54.515808 224.119594 64.314514 224.433091 66.491455 224.746589 66.414001 225.060087 64.125 225.687083 54.708618 226.314078 45.246094 226.627576 42.091919 226.941074 41.259705 227.254572 43.149902 227.881567 52.388306 228.508563 62.028809 228.822061 64.808899 229.135559 65.646057 229.449057 64.443054 229.762554 61.361389 231.016546 44.267212 231.330044 42.320984 231.643541 42.708252 231.957039 45.402649 233.21103 63.513611 233.524528 65.34613 233.838026 65.136841 234.151524 62.938477 234.77852 54.316406 235.405515 45.821228 235.719013 43.060913 236.032511 42.296265 236.346009 43.934326 236.973004 52.482239 237.6 61.934875 237.913498 50.096008 238.226996 78.183655 238.540493 50.924927 238.853991 34.2724 239.167489 50.506348 239.480987 72.516357 240.107983 32.306396 240.42148 53.914307 240.734978 64.039307 241.048476 58.569763 241.361974 40.046814 241.675472 50.377808 241.98897 65.295044 242.302467 63.693237 242.615965 47.259888 242.929463 67.506592 243.242961 64.846802 243.869956 39.699097 244.496952 55.954468 245.123948 37.690247 245.437446 53.708313 245.750943 52.993103 246.064441 45.045044 246.377939 52.828308 246.691437 65.565308 247.004935 65.334595 247.318433 61.758545 247.63193 60.497864 247.945428 61.98761 248.258926 57.887512 248.572424 50.521179 248.885922 47.874573 249.199419 47.739441 249.512917 45.745422 249.826415 41.997986 250.139913 44.880249 250.453411 52.691528 250.766909 56.760315 251.080406 57.523315 251.707402 66.542542 252.0209 63.881104 252.334398 59.720032 252.647896 58.0177 252.961393 55.394165 253.588389 44.993958 253.901887 43.448181 254.215385 44.577026 254.528882 44.494629 254.84238 47.703186 255.469376 58.825195 256.409869 64.833618 256.723367 63.836609 257.977358 48.034424 258.290856 44.234253 258.604354 43.051025 258.917852 44.585266 259.544848 50.605225 260.171843 59.807373 260.485341 62.691284 260.798839 63.620728 261.112337 63.454285 261.425835 61.883789 262.993324 44.5177 263.306821 43.725037 263.620319 45.486694 264.247315 52.731079 264.874311 60.926331 265.187808 63.42627 265.501306 63.872864 265.814804 62.786865 266.128302 60.245728 267.382293 45.64325 267.695791 44.143616 268.009289 44.339722 268.322787 46.571045 269.576778 62.022217 269.890276 63.823425 270.203774 63.727844 270.517271 61.854126 271.144267 54.624573 271.771263 47.047302 272.084761 44.690735 272.398258 44.02002 272.711756 45.195007 273.025254 48.044312 274.279245 62.940125 274.592743 63.943726 274.906241 63.142822 275.219739 60.637939 276.47373 45.946472 276.787228 44.176575 277.100726 44.306763 277.414224 46.281006 278.041219 53.985168 278.668215 61.644836 278.981713 63.559753 279.29521 63.744324 279.608708 62.187012 280.235704 55.161804 280.8627 47.589478 281.176197 45.043396 281.489695 44.043091 281.803193 44.972534 282.116691 47.63562 283.370682 62.63031 283.68418 63.815186 283.997678 63.235107 284.311176 61.012024 285.878665 44.441895 286.192163 44.270508 286.50566 45.969543 287.132656 53.390259 287.759652 61.165283 288.073149 63.304321 288.386647 63.727844 288.700145 62.427612 289.013643 59.606323 290.267634 45.537781 290.581132 44.488037 290.89463 45.24115 291.208128 47.609253 292.462119 61.506409 292.775617 62.859375 293.089115 62.641846 293.402612 60.893372 294.029608 54.219177 294.656604 47.589478 294.970102 45.638306 295.283599 45.162048 295.597097 46.335388 295.910595 48.924316 297.164586 62.05188 297.478084 62.861023 297.791582 62.078247 298.10508 59.840332 299.359071 46.747375 299.672569 45.31366 299.986067 45.465271 300.299565 47.180786 300.92656 53.952209 301.553556 60.738464 301.867054 62.495178 302.180552 62.70282 302.494049 61.358093 303.121045 55.1651 303.748041 48.326111 304.061538 46.094788 304.375036 45.22467 304.688534 45.972839 305.002032 48.212402 306.256023 61.511353 306.569521 62.712708 306.883019 62.338623 307.196517 60.471497 308.764006 45.630066 309.077504 45.366394 309.391001 46.689697 310.017997 52.966736 310.644993 60.000183 310.958491 62.091431 311.271988 62.712708 311.585486 61.758545 311.898984 59.416809 313.152975 46.632019 313.466473 45.394409 313.779971 45.70752 314.093469 47.582886 314.720464 54.390564 315.34746 60.896667 315.660958 62.467163 315.974456 62.495178 316.287954 60.995544 316.914949 54.716858 317.541945 48.113525 317.855443 46.043701 318.16894 45.359802 318.482438 46.282654 318.795936 48.639221 320.049927 61.611877 320.363425 62.612183 320.676923 62.056824 320.990421 60.064453 322.244412 47.299438 322.55791 45.847595 322.871408 45.880554 323.184906 47.380188 323.811901 53.447937 324.438897 59.690369 324.752395 61.453674 325.065893 61.878845 325.37939 60.891724 325.692888 58.68512 326.94688 47.254944 327.260377 46.256287 327.573875 46.651794 327.887373 48.385437 328.514369 54.50592 329.141364 60.280334 329.454862 61.643188 329.76836 61.623413 330.081858 60.225952 330.708853 54.53064 331.335849 48.611206 331.649347 46.811646 331.962845 46.274414 332.276343 47.124756 332.58984 49.237427 333.843832 60.838989 334.157329 61.750305 334.470827 61.269104 334.784325 59.477783 336.038316 47.937195 336.351814 46.523254 336.665312 46.447449 336.97881 47.722961 337.605806 53.344116 338.232801 59.471191 338.546299 61.247681 338.859797 61.704163 339.173295 60.771423 339.486792 58.624146 340.740784 47.367004 341.054282 46.388123 341.367779 46.755615 341.681277 48.448059 342.308273 54.448242 342.935269 60.153442 343.248766 61.517944 343.562264 61.508057 343.875762 60.146851 344.502758 54.560303 345.129753 48.766113 345.443251 46.997864 345.756749 54.950867 346.070247 50.643127 346.383745 66.890259 346.697242 39.292053 347.01074 49.899902 347.324238 54.728394 347.637736 75.693604 348.264731 34.107605 348.891727 75.912781 349.205225 45.025269 349.832221 54.868469 350.145718 59.621155 350.459216 37.652344 351.086212 52.704712 351.39971 57.292603 351.713208 44.235901 352.340203 63.162598 352.653701 61.882141 352.967199 52.134521 353.280697 54.814087 353.594194 60.600037 353.907692 55.067871 354.22119 43.759644 354.848186 53.233704 355.161684 47.381836 355.475181 44.918152 356.102177 58.807068 356.415675 55.22937 356.729173 54.726746 357.042671 61.839294 357.356168 64.037659 357.669666 58.080322 357.983164 54.392212 358.296662 55.1651 358.61016 55.203003 358.923657 48.098694 359.237155 45.95636 359.550653 48.957275 359.864151 50.453613 360.177649 48.716675 360.491147 50.941406 360.804644 56.363159 361.118142 58.704895 361.43164 58.91748 361.745138 59.720032 362.058636 61.335022 362.372134 59.228943 362.685631 55.55896 363.626125 49.209412 363.939623 46.763855 364.25312 47.292847 365.507112 55.933044 365.82061 59.278381 366.134107 60.397339 366.761103 60.049622 367.074601 58.645569 367.701597 52.467407 368.328592 48.767761 368.64209 47.269775 368.955588 47.271423 369.582583 51.651672 370.836575 60.763184 371.150073 60.445129 371.46357 59.314636 371.777068 57.501892 372.717562 49.458252 373.03106 48.013 373.344557 47.429626 373.658055 47.790527 373.971553 49.557129 375.225544 59.757935 375.539042 60.802734 375.85254 60.397339 376.166038 58.863098 376.793033 53.94397 377.420029 48.835327 377.733527 47.617493 378.047025 47.472473 378.360522 48.36731 378.67402 50.330017 379.614514 58.46759 379.928012 60.141907 380.241509 60.743408 380.555007 60.09906 380.868505 58.259949 382.122496 48.378845 382.435994 47.38678 382.749492 47.614197 383.06299 48.942444 383.689985 53.993408 384.316981 59.115234 384.630479 60.446777 384.943977 60.628052 385.257475 59.604675 385.88447 54.888245 386.511466 49.70874 386.824964 48.10199 387.138462 47.543335 387.451959 48.167908 387.765457 49.85376 389.019448 59.228943 389.332946 60.09082 389.646444 59.866699 389.959942 58.619202 390.586938 54.014832 391.213933 49.506042 391.527431 48.255249 391.840929 48.011353 392.154427 48.840271 392.467925 50.608521 393.721916 59.510742 394.035414 60.074341 394.348911 59.537109 394.662409 58.006165 395.916401 49.041321 396.229898 48.090454 396.543396 48.182739 396.856894 49.319824 397.48389 53.825317 398.110885 58.510437 398.424383 59.774414 398.737881 59.998535 399.051379 59.131714 399.678374 54.968994 400.30537 50.226196 400.618868 48.665588 400.932366 48.034424 401.245864 48.454651 401.559361 49.881775 402.813353 58.985046 403.126851 59.930969 403.440348 59.809021 403.753846 58.632385 404.380842 54.169739 405.007837 49.679077 405.321335 48.377197 405.634833 48.077271 405.948331 48.832031 406.261829 50.531067 407.51582 59.373962 407.829318 59.990295 408.142816 59.518982 408.456313 58.058899 409.710305 49.197876 410.023803 48.199219 410.3373 48.237122 410.650798 49.303345 411.277794 53.677002 411.90479 58.334106 412.218287 59.64917 412.531785 59.927673 412.845283 59.128418 413.472279 55.090942 414.099274 50.384399 414.412772 48.805664 414.72627 48.125061 415.039768 48.482666 415.353266 49.847168 416.920755 59.827148 417.234253 59.766174 417.54775 58.663696 418.174746 54.318054 418.801742 49.863647 419.115239 48.611206 419.428737 48.324463 419.742235 49.06604 420.369231 52.867859 420.996226 57.353577 421.309724 58.835083 421.623222 59.429993 421.93672 59.05426 422.250218 57.775452 423.504209 49.749939 423.817707 48.805664 424.131205 48.767761 424.444702 49.674133 425.071698 53.546814 425.698694 57.795227 426.012192 59.037781 426.325689 59.364075 426.639187 58.713135 426.952685 57.218445 428.206676 49.398926 428.520174 48.715027 428.833672 48.965515 429.14717 50.128967 429.774165 54.234009 430.401161 58.228638 430.714659 59.209167 431.028157 59.238831 431.341655 58.327515 431.96865 54.481201 432.595646 50.386047 432.909144 49.118774 433.222642 48.723267 433.536139 49.252258 433.849637 50.641479 435.103628 58.594482 435.417126 59.301453 435.730624 59.032837 436.044122 57.875977 437.611611 48.927612 437.925109 48.80896 438.238607 49.609863 438.865602 53.324341 439.492598 57.569458 439.806096 58.882874 440.119594 59.303101 440.433091 58.74939 440.746589 57.350281 442.000581 49.583496 442.314078 48.820496 442.627576 48.973755 442.941074 50.03009 443.56807 54.014832 444.195065 58.030884 444.508563 59.088867 444.822061 59.20752 445.135559 58.388489 445.762554 54.695435 446.38955 50.603577 446.703048 49.285217 447.016546 48.789185 447.330044 49.224243 447.643541 50.514587 448.897533 58.414856 449.21103 59.200928 449.524528 59.031189 449.838026 57.964966 450.465022 54.032959 451.092017 50.153687 451.405515 49.062744 451.719013 48.848511 452.032511 49.553833 452.346009 51.055115 453.6 58.634033" style="fill:none;stroke:#1a0dcc;stroke-linecap:square;stroke-width:1.5"/></g></g></g><defs><clipPath id="p629da2a526"><rect height="108" width="475.2" x="0" y="0"/></clipPath></defs></svg>
</span>
</blockquote>
<p>This sounds dreadful, but we can subtract it from the original signal to produce</p>
<blockquote>
<span class=svg><svg height="108pt" viewBox="0 0 475.2 108" width="475.2pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="figure_1"><g id="patch_1"><path d="M0 108H475.2V0H0z" style="fill:none"/></g><g id="axes_1"><g id="line2d_1"><path clip-path="url(#p0c8c92a352)" d="M21.6 53.980225 21.913498 46.877563 22.226996 59.535461 22.540493 61.38446 22.853991 47.698242 23.167489 44.848938 23.480987 56.53949 23.794485 60.857117 24.107983 56.165405 24.42148 57.406311 24.734978 60.984009 25.048476 57.806763 25.361974 48.156372 25.675472 50.494812 25.98897 49.262146 26.302467 46.131042 26.615965 45.381226 26.929463 54.214233 27.242961 59.462952 27.556459 57.940247 27.869956 57.650208 28.183454 60.352844 28.496952 59.462952 28.81045 54.611389 29.123948 52.976624 29.437446 54.232361 30.064441 49.346191 30.377939 48.639221 31.004935 53.36554 31.318433 54.00824 31.63193 55.962708 31.945428 57.035522 32.258926 57.220093 32.572424 56.112671 33.199419 55.142029 33.826415 52.600891 34.139913 51.908752 34.453411 51.791748 34.766909 51.837891 35.080406 52.447632 35.707402 54.805847 36.0209 55.22113 36.647896 55.524353 36.961393 55.435364 37.588389 54.163147 37.901887 53.817078 38.528882 52.796997 38.84238 52.628906 39.155878 52.958496 40.096372 54.365845 40.409869 54.711914 40.723367 54.819031 41.350363 54.606445 41.977358 54.079102 42.604354 53.583069 43.23135 53.370483 43.544848 53.472656 44.798839 54.364197 45.425835 54.425171 46.05283 54.182922 47.306821 53.645691 47.933817 53.759399 48.874311 54.146667 49.501306 54.214233 50.4418 54.07251 51.695791 53.831909 52.636284 53.950562 53.576778 54.112061 54.517271 54.075806 56.084761 53.902771 59.533237 53.993408 61.100726 53.975281l2.194484.037903L66.116691 54.011536 129.756749 54.034607 130.070247 43.927734 130.383745 60.216064 130.697242 50.354736 131.01074 46.71936 131.324238 59.291565 131.637736 64.073914 131.951234 53.962097 132.264731 59.27179 132.578229 60.09082 132.891727 58.810364 133.205225 51.106201 133.518723 46.996216 133.832221 51.707703 134.145718 51.294067 134.459216 50.516235 134.772714 53.16449 135.086212 56.80481 135.39971 57.122864 135.713208 55.664429 136.026705 55.881958 136.340203 58.432983 136.653701 56.867432 136.967199 52.866211 137.594194 53.973633 137.907692 51.86261 138.22119 51.233093 138.534688 51.295715 138.848186 52.983215 139.161684 53.299622 139.475181 53.914307 139.788679 55.137085 140.102177 55.867126 140.729173 55.140381 141.042671 54.949219 141.356168 54.472961 141.983164 53.129883 142.61016 52.792053 142.923657 52.77063 143.237155 53.215576 143.864151 54.364197 144.804644 54.894836 145.118142 54.756409 146.058636 53.932434 146.999129 53.358948 147.626125 53.625916 148.880116 54.423523 149.507112 54.380676 150.134107 54.082397 151.074601 53.685242 151.701597 53.693481 152.955588 54.173035 153.582583 54.229065 154.836575 53.965393 155.777068 53.828613 157.03106 54.041199 158.285051 54.097229 160.479536 53.92749 162.987518 54.028015 165.182003 53.980225 167.689985 54.00824 169.88447 53.998352 175.213933 54.011536 181.170392 53.995056 185.245864 54.003296 190.575327 54.001648 197.472279 54 207.817707 53.998352 237.913498 54.023071 238.226996 61.882141 238.853991 45.091187 239.480987 61.549255 240.107983 45.758606 240.42148 53.970337 240.734978 57.533203 241.048476 55.522705 241.361974 49.570312 241.98897 57.225037 242.302467 56.633423 242.615965 52.261414 242.929463 57.287659 243.242961 56.526306 243.869956 51.007324 244.496952 54.369141 245.123948 51.239685 245.437446 53.957153 245.750943 53.851685 246.064441 52.704712 246.377939 53.845093 246.691437 55.506226 247.004935 55.410645 247.318433 54.91626 247.63193 54.725098 247.945428 54.847046 248.258926 54.397156 248.572424 53.667114 248.885922 53.439697 249.199419 53.457825 249.826415 53.057373 250.139913 53.316101 250.453411 53.904419 250.766909 54.186218 251.080406 54.225769 251.707402 54.733337l1.880987-1.117309L253.901887 53.563293 254.84238 53.772583 255.469376 54.159851 256.723367 54.263672 257.977358 53.876404 258.604354 53.787415 259.858345 54.021423 260.798839 54.130188 261.739332 54.047791 262.993324 53.907715 264.247315 53.988464 265.814804 54.05603 270.203774 54.028015 278.354717 54.003296 281.489695 53.996704 291.521626 53.993408 294.656604 54.001648 305.002032 53.996704 309.077504 54.001648 319.109434 54.004944 345.756749 54.034607 346.070247 52.932129 346.383745 58.077026 346.697242 48.9375 347.01074 52.500366 347.324238 54.245544 347.637736 62.933533 348.264731 46.608948 348.891727 61.40918 349.205225 51.135864 349.518723 53.044189 350.145718 55.529297 350.459216 49.77301 351.086212 53.698425 351.39971 54.721802 351.713208 51.959839 352.026705 54.25708 352.340203 55.723755 352.653701 55.415588 352.967199 53.673706 353.280697 54.138428 353.594194 55.006897 353.907692 54.153259 354.22119 52.587708 354.848186 53.902771 355.161684 53.222168 355.475181 52.983215 356.102177 54.491089 356.415675 54.113708 356.729173 54.074158 357.042671 54.687195 357.356168 54.830566 357.669666 54.326294 357.983164 54.034607 358.61016 54.075806 358.923657 53.620972 359.237155 53.503967 359.864151 53.80719 360.177649 53.714905 360.491147 53.843445 360.804644 54.108765 361.43164 54.212585 362.372134 54.19281 362.999129 53.986816 364.25312 53.810486 366.447605 54.118652 367.701597 53.981873 368.955588 53.904419 371.46357 54.049438 374.285051 53.986816 376.793033 54.004944 379.301016 54.00824 385.570972 54.006592 390.900435 53.993408 395.289405 53.998352 402.186357 54.006592 406.575327 53.996704 410.023803 54.003296 415.666763 53.995056 437.611611 54.001648 444.508563 53.995056 448.897533 54 453.6 54.001648" style="fill:none;stroke:#cc0d1a;stroke-linecap:square;stroke-width:1.5"/></g></g></g><defs><clipPath id="p0c8c92a352"><rect height="108" width="475.2" x="0" y="0"/></clipPath></defs></svg>
</span>
</blockquote>
<p>which gives the peaks, and we can do whatever we want with them. But the isolation isn&rsquo;t perfect. The decaying tone causes the compressor to dampen the signal more when the tone is loud, and some of the tone ends up in the peaks signal. What we care about is that they sum exactly to the original signal, and we can now process them independently.</p>
<h2 id=saturators>Saturators</h2>
<p>Applying a saturator to the difference signal of a saturator <em>reduces</em> the amount of distortion. The simplest saturator is the hard-clip
<span class=svgi><svg height="18pt" viewBox="0 0 28.8 18" width="28.8pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="figure_1"><g id="patch_1"><path d="M0 18H28.8V0H0z" style="fill:none"/></g><g id="axes_1"><g id="line2d_1"><path clip-path="url(#p7eb5527340)" d="M1.309091 11.97h.415584.415585.415584.415585.415584.415584.415585.415584.415585.415584.415584.415585.415584.415585.415584.415585H8.374026 8.78961h.415585H9.620779h.415585L10.451948 11.714286 10.867532 11.428571l.415585-.285714L11.698701 10.857143l.415585-.285714L12.52987 10.285714 12.945455 10 13.361039 9.714286 13.776623 9.428571l.415585-.285714L14.607792 8.857143l.415585-.285714L15.438961 8.285714 15.854545 8 16.27013 7.714286 16.685714 7.428571l.415585-.285714L17.516883 6.857143l.415585-.285714L18.348052 6.285714 18.763636 6.03H19.179221 19.594805h.415585H20.425974 20.841558h.415585H21.672727h.415585H22.503896h.415585H23.335065 23.750649h.415585H24.581818h.415585H25.412987 25.828571h.415585H26.65974h.415585H27.490909" style="fill:none;stroke:#1a0dcc;stroke-linecap:square;stroke-width:1.5"/></g></g></g><defs><clipPath id="p7eb5527340"><rect height="18" width="28.8" x="0" y="0"/></clipPath></defs></svg>
</span>
, and the difference signal of this is also a saturator,
<span class=svgi><svg height="18pt" viewBox="0 0 28.8 18" width="28.8pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="figure_1"><g id="patch_1"><path d="M0 18H28.8V0H0z" style="fill:none"/></g><g id="axes_1"><g id="line2d_1"><path clip-path="url(#p411deb80e6)" d="M1.309091 2.97l.415584.285714.415585.285715.415584.285714.415585.285714.415584.285714L3.802597 4.684286 4.218182 4.97l.415584.285714.415585.285715.415584.285714.415584.285714.415585.285714L6.711688 6.684286 7.127273 6.97l.415584.285714.415585.285715L8.374026 7.827143 8.78961 8.112857l.415585.285714L9.620779 8.684286 10.036364 8.97 10.451948 9H10.867532h.415585H11.698701h.415585H12.52987h.415585H13.361039 13.776623h.415585H14.607792h.415585H15.438961 15.854545 16.27013 16.685714h.415585H17.516883h.415585H18.348052L18.763636 9.03 19.179221 9.315714 19.594805 9.601429l.415585.285714L20.425974 10.172857 20.841558 10.458571 21.257143 10.744286 21.672727 11.03l.415585.285714L22.503896 11.601429l.415585.285714L23.335065 12.172857 23.750649 12.458571 24.166234 12.744286 24.581818 13.03l.415585.285714L25.412987 13.601429 25.828571 13.887143l.415585.285714L26.65974 14.458571 27.075325 14.744286 27.490909 15.03" style="fill:none;stroke:#1a0dcc;stroke-linecap:square;stroke-width:1.5"/></g></g></g><defs><clipPath id="p411deb80e6"><rect height="18" width="28.8" x="0" y="0"/></clipPath></defs></svg>
</span>
. If we hard-clip this curve, we get
<span class=svgi><svg height="18pt" viewBox="0 0 28.8 18" width="28.8pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="figure_1"><g id="patch_1"><path d="M0 18H28.8V0H0z" style="fill:none"/></g><g id="axes_1"><g id="line2d_1"><path clip-path="url(#pabcc87849c)" d="M1.309091 6.03h.415584.415585.415584.415585.415584.415584.415585.415584.415585.415584L5.880519 6.112857l.415585.285714L6.711688 6.684286 7.127273 6.97l.415584.285714.415585.285715L8.374026 7.827143 8.78961 8.112857l.415585.285714L9.620779 8.684286 10.036364 8.97 10.451948 9H10.867532h.415585H11.698701h.415585H12.52987h.415585H13.361039 13.776623h.415585H14.607792h.415585H15.438961 15.854545 16.27013 16.685714h.415585H17.516883h.415585H18.348052L18.763636 9.03 19.179221 9.315714 19.594805 9.601429l.415585.285714L20.425974 10.172857 20.841558 10.458571 21.257143 10.744286 21.672727 11.03l.415585.285714L22.503896 11.601429l.415585.285714L23.335065 11.97H23.750649h.415585H24.581818h.415585H25.412987 25.828571h.415585H26.65974h.415585H27.490909" style="fill:none;stroke:#1a0dcc;stroke-linecap:square;stroke-width:1.5"/></g></g></g><defs><clipPath id="pabcc87849c"><rect height="18" width="28.8" x="0" y="0"/></clipPath></defs></svg>
</span>
, and adding this to the original signal
<span class=svgi><svg height="18pt" viewBox="0 0 28.8 18" width="28.8pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="figure_1"><g id="patch_1"><path d="M0 18H28.8V0H0z" style="fill:none"/></g><g id="axes_1"><g id="line2d_1"><path clip-path="url(#pecdcb50537)" d="M1.309091 18 1.724675 17.714286l.415585-.285715L2.555844 17.142857 2.971429 16.857143 3.387013 16.571429l.415584-.285715L4.218182 16l.415584-.285714.415585-.285715.415584-.285714L5.880519 14.857143l.415585-.285714.415584-.285715L7.127273 14l.415584-.285714.415585-.285715L8.374026 13.142857 8.78961 12.857143l.415585-.285714L9.620779 12.285714 10.036364 12 10.451948 11.714286 10.867532 11.428571l.415585-.285714L11.698701 10.857143l.415585-.285714L12.52987 10.285714 12.945455 10 13.361039 9.714286 13.776623 9.428571l.415585-.285714L14.607792 8.857143l.415585-.285714L15.438961 8.285714 15.854545 8 16.27013 7.714286 16.685714 7.428571l.415585-.285714L17.516883 6.857143l.415585-.285714L18.348052 6.285714 18.763636 6 19.179221 5.714286 19.594805 5.428571l.415585-.285714L20.425974 4.857143 20.841558 4.571429 21.257143 4.285714 21.672727 4l.415585-.285714L22.503896 3.428571l.415585-.285714L23.335065 2.857143 23.750649 2.571429l.415585-.285715L24.581818 2l.415585-.285714L25.412987 1.428571 25.828571 1.142857l.415585-.285714L26.65974.571429l.415585-.285715L27.490909.0" style="fill:none;stroke:#1a0dcc;stroke-linecap:square;stroke-width:1.5"/></g></g></g><defs><clipPath id="pecdcb50537"><rect height="18" width="28.8" x="0" y="0"/></clipPath></defs></svg>
</span>
produces the saturator curve
<span class=svgi><svg height="18pt" viewBox="0 0 28.8 18" width="28.8pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="figure_1"><g id="patch_1"><path d="M0 18H28.8V0H0z" style="fill:none"/></g><g id="axes_1"><g id="line2d_1"><path clip-path="url(#pac73bfb031)" d="M1.309091 15.03 1.724675 14.744286 2.14026 14.458571 2.555844 14.172857l.415585-.285714.415584-.285714.415584-.285715L4.218182 13.03 4.633766 12.744286 5.049351 12.458571 5.464935 12.172857 5.880519 11.97h.415585.415584.415585.415584.415585H8.374026 8.78961h.415585H9.620779h.415585L10.451948 11.714286 10.867532 11.428571l.415585-.285714L11.698701 10.857143l.415585-.285714L12.52987 10.285714 12.945455 10 13.361039 9.714286 13.776623 9.428571l.415585-.285714L14.607792 8.857143l.415585-.285714L15.438961 8.285714 15.854545 8 16.27013 7.714286 16.685714 7.428571l.415585-.285714L17.516883 6.857143l.415585-.285714L18.348052 6.285714 18.763636 6.03H19.179221 19.594805h.415585H20.425974 20.841558h.415585H21.672727h.415585H22.503896h.415585L23.335065 5.827143 23.750649 5.541429l.415585-.285715L24.581818 4.97l.415585-.285714L25.412987 4.398571 25.828571 4.112857l.415585-.285714L26.65974 3.541429l.415585-.285715L27.490909 2.97" style="fill:none;stroke:#1a0dcc;stroke-linecap:square;stroke-width:1.5"/></g></g></g><defs><clipPath id="pac73bfb031"><rect height="18" width="28.8" x="0" y="0"/></clipPath></defs></svg>
</span>
. This saturator doesn&rsquo;t clip very quiet or very loud signal values, only those somewhere inbetween.</p>
<p>One of the nice things about this is that good saturators have good anti-aliasing, and so will any curves you make this way.</p>
<p>Less esoterically, think of saturation as adding harmonic content. Taking the difference isolates the added harmonics, and you can apply EQ to them.</p>
<p>Another option is to EQ before saturating, take the difference between the EQ&rsquo;d and saturated signals, then add that back to the original signal. Now you have a saturator that responds differently to certain frequencies. Mixing linear and non-linear effects this way will mess with any intuition you have for them&ndash;don&rsquo;t think you&rsquo;re being scientific when you do this.</p>
<h3 id=bit-depth-reduction>Bit-depth Reduction</h3>
<p>You can think of bit-depth reduction as an extreme saturation curve,
<span class=svgi><svg height="18pt" viewBox="0 0 28.8 18" width="28.8pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="figure_1"><g id="patch_1"><path d="M0 18H28.8V0H0z" style="fill:none"/></g><g id="axes_1"><g id="line2d_1"><path clip-path="url(#p97dbe01af5)" d="M1.309091 18h.415584.415585.415584.415585.415584.415584.415585l.415584-2.25h.415585.415584.415584.415585.415584.415585.415584l.415585-2.25H8.374026 8.78961h.415585H9.620779h.415585H10.451948 10.867532l.415585-2.25H11.698701h.415585H12.52987h.415585H13.361039 13.776623h.415585L14.607792 9h.415585H15.438961 15.854545 16.27013 16.685714h.415585H17.516883l.415585-2.25H18.348052 18.763636 19.179221 19.594805h.415585H20.425974 20.841558l.415585-2.25H21.672727h.415585H22.503896h.415585H23.335065 23.750649h.415585L24.581818 2.25h.415585H25.412987 25.828571h.415585H26.65974h.415585L27.490909.0" style="fill:none;stroke:#1a0dcc;stroke-linecap:square;stroke-width:1.5"/></g></g></g><defs><clipPath id="p97dbe01af5"><rect height="18" width="28.8" x="0" y="0"/></clipPath></defs></svg>
</span>
. This particular curve reduces a signal to 3 bits of dynamic range: <code>000</code>, <code>001</code>, <code>010</code>, <code>011</code>, <code>100</code>, <code>101</code>, <code>110</code>, and <code>111</code>. The entire dynamic range is mapped to these 8 values, so there are 8 steps. Its difference signal is
<span class=svgi><svg height="18pt" viewBox="0 0 28.8 18" width="28.8pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="figure_1"><g id="patch_1"><path d="M0 18H28.8V0H0z" style="fill:none"/></g><g id="axes_1"><g id="line2d_1"><path clip-path="url(#pe010576229)" d="M1.309091 9l.415584.285714.415585.285715.415584.285714L2.971429 10.142857l.415584.285714.415584.285715L4.218182 11l.415584-1.964286.415585.285715.415584.285714L5.880519 9.892857l.415585.285714.415584.285715.415585.285714.415584.285714.415585-1.964285L8.374026 9.357143 8.78961 9.642857l.415585.285714L9.620779 10.214286 10.036364 10.5 10.451948 10.785714 10.867532 11.071429l.415585-1.964286L11.698701 9.392857l.415585.285714L12.52987 9.964286l.415585.285714L13.361039 10.535714 13.776623 10.821429l.415585.285714L14.607792 9.142857l.415585.285714L15.438961 9.714286 15.854545 10 16.27013 10.285714 16.685714 10.571429l.415585.285714L17.516883 11.142857l.415585-1.964286L18.348052 9.464286 18.763636 9.75 19.179221 10.035714 19.594805 10.321429l.415585.285714L20.425974 10.892857 20.841558 11.178571l.415585-1.964285L21.672727 9.5l.415585.285714L22.503896 10.071429l.415585.285714L23.335065 10.642857 23.750649 10.928571l.415585.285715L24.581818 9.25l.415585.285714L25.412987 9.821429 25.828571 10.107143 26.244156 10.392857 26.65974 10.678571l.415585.285715L27.490909 9" style="fill:none;stroke:#1a0dcc;stroke-linecap:square;stroke-width:1.5"/></g></g></g><defs><clipPath id="pe010576229"><rect height="18" width="28.8" x="0" y="0"/></clipPath></defs></svg>
</span>
.</p>
<p>There are two ways to interpret it. One is that it&rsquo;s wraparound distortion (see the <a href=https://docs.cycling74.com/max7/maxobject/pong~>pong~</a> object in Max/MSP). Another is that it&rsquo;s giving you back the bits the other curve throws away. Either way, I like experimenting with this. I&rsquo;m one of those unfortunate people who likes the sound of bit crushing, and you can use this to get a lot more variation (and dynamic range) out of it.</p>
<h3 id=doing-it>Doing It</h3>
<p>The best way of actually doing this took me a while to figure out. I use Ableton Live, which has audio effect racks. They are almost enough to do everything we want to do, but if you&rsquo;re using a DAW that instead relies on complex routing, it might be too unwieldly to use in practice. I&rsquo;ve settled on using two audio effect racks, one for the <code>a[n] + (b[n] - a[n])</code> case, and another for the <code>b[n] + (a[n] - b[n])</code> case, which I call positive and negative.</p>
<p>The positive case is easiest, because <code>a[n]</code> is the original dry signal, and we can duplicate it as needed by adding more chains to an audio effect rack.</p>
<div style=display:flex;justify-content:center>
<img src=/posts/dumb-tricks-with-phase-inversion/AER1.png width=796 height=192>
</div>
<p>The outer A chain is empty. The inner -A chain contains a utility effect with both channels inverted. Then, you place any effect you want the difference signal of in the B chain, and can process the difference signal after the inner audio effect rack. The utility effects gain knob acts as a dry/wet mix; the effect is 100% wet at 0 dB.</p>
<p>The negative case is more tricky. Implementing <code>b[n] + (a[n] - b[n])</code> requires routing that effect racks can&rsquo;t do. You could produce <code>b</code> twice, but having to update the every parameter twice (or being limited to the effect rack&rsquo;s macro controls) is a huge pain. Instead, I use the side chain from some of Ableton&rsquo;s effects, which can capture audio before or after any effect rack. <a href=/posts/dumb-tricks-with-phase-inversion/AER2.png>See here for an image</a>, where I&rsquo;ve used the compressor&rsquo;s side chain, set to audition, to tap audio from the B chain before inverting it. To use this, we put an effect in the B chain, and everything after the inner effect rack is the difference signal. Collapse the side chain rack and never think about it. This effect&rsquo;s final utility gain is 100% dry at 0 dB (if the difference signal is left unmodified).</p>
<p>One thing is missing from these: it&rsquo;s really nice to be able to apply effects to the original signal after we&rsquo;ve used it to produce a difference signal but before we&rsquo;ve summed them back together. To do that, put another empty effect rack in the A (positive) or B (negative) chain, and use the side chain audition to tap that rack pre-fx. Now, anything before the emtpy rack gets differenced, and anything after only gets sent to the output.</p>
<p>I think you should figure out recreating this for yourself, or even find your own solution, because keeping track of what signal you&rsquo;re producing and what needs to be inverted at what point in the signal chain is informative. My early attempts weren&rsquo;t pretty. But if you&rsquo;d rather just use mine, here&rsquo;s <a href=/posts/dumb-tricks-with-phase-inversion/Difference%20(Positive).adg>Difference (Positive)</a> and <a href=/posts/dumb-tricks-with-phase-inversion/Difference%20(Negative).adg>Difference (Negative)</a> (Live 10. I don&rsquo;t know if these things are backwards compatible, but I don&rsquo;t use any features that are 10 only).</p>
<section class=footnotes role=doc-endnotes>
<hr>
<ol>
<li id=fn:1 role=doc-endnote>
<p>The process for finding the frequency content of a signal, the fourier transform, <a href=https://math.stackexchange.com/questions/140788/how-is-the-fourier-transform-linear>is linear</a>.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
<li id=fn:2 role=doc-endnote>
<p>One thing I&rsquo;m taking for granted here is that plugins correctly report the delay they introduce to the signal chain. It&rsquo;s hard to write a compressor people want to use without knowing exactly how much delay you&rsquo;re inserting into the signal chain, but equalisers and filters can introduce frequency-specific delays. I couldn&rsquo;t say how common or uncommon it is for plugins to handle this properly. All this still works, but the difference signal contains information you don&rsquo;t want it to contain. Then again, if a filter is messing with the phase of your audio, it&rsquo;s already screwing up your audio! You don&rsquo;t care about theoretical correctness if you&rsquo;re still using that filter.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
</ol>
</section>
</div>
<blockquote class=aside>
<noscript><p style=margin:auto>There might be <a href=https://utteranc.es>utteranc.es</a> comments here when javascript is on.</p></noscript>
<script src=https://utteranc.es/client.js repo=graemephi/graemephi.github.io issue-term=og:title theme=github-light crossorigin=anonymous async></script>
</blockquote>
<h2>More Posts</h2>
<ol reversed>
<li style=list-style:none>
<a href=https://graemephi.github.io/posts/some-low-discrepancy-noise-functions/>Some low discrepancy noise functions</a> (2022-08-10)
</li>
<li style=list-style:none>
<a href=https://graemephi.github.io/posts/difference-decay/>Difference Decay</a> (2021-12-29)
</li>
<li style=list-style:none>
<a href=https://graemephi.github.io/posts/stb_ds-string-interning/>stb_ds: string interning</a> (2020-08-27)
</li>
<li style=list-style:none>
<a href=https://graemephi.github.io/posts/deep-sky-object/>i made a twitter bot: deep sky object</a> (2020-05-20)
</li>
<li style=list-style:none>
<a href=https://graemephi.github.io/posts/server-side-katex-with-hugo-part-2/>Server-side KaTeX With Hugo: Part 2</a> (2020-01-19)
</li>
<li style=list-style:none>
<a href=https://graemephi.github.io/posts/calculating-lod/>Calculating LOD</a> (2019-12-31)
</li>
<li style=list-style:none>
<a href=https://graemephi.github.io/posts/static-katex-with-hugo/>Server-side KaTeX With Hugo</a> (2019-12-15)
</li>
<li style=list-style:none>
<a href=https://graemephi.github.io/posts/triangle-dft/>The Discrete Fourier Transform, But With Triangles</a> (2019-12-14)
</li>
</ol>
<div class=rss-link>
<a href=/index.xml title=RSS>rss</a>
</div>
</div>
</body>
</html>